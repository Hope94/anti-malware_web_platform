{% extends 'training_app/base.html' %}
{% load nvd3_tags %}
{% block head %}
    {% include_chart_jscss %}
    {% load_chart data.charttype data.chartdata data.chartcontainer data.extra %}
{% endblock %}
{% block navbar %}
     <ul class="nav">
        <li class="active">
            <a href="{% url 'training_app:index'%}">
                <i class="pe-7s-graph"></i>
                <p>Tableau de bord</p>
            </a>
        </li>
        <li>
            <a href="{% url 'training_app:apks' %}">
                <i class="pe-7s-news-paper"></i>
                <p>Liste des Apks</p>
            </a>
        </li>
        <li>
            <a href="{% url 'training_app:train_model' %}">
                <i class="pe-7s-science"></i>
                <p>Apprentissage</p>
            </a>
        </li>
        <li>
            <a href="{% url 'training_app:vector_space' %}">
                <i class="pe-7s-vector"></i>
                <p>Espace vectoriel</p>
            </a>
        </li>
        <li>
            <a href="{% url 'training_app:select_dimensions'%}">
                <i class="pe-7s-box2"></i>
                <p>Sélection dimensions</p>
            </a>
        </li>
        <li>
            <a href="{% url 'training_app:datasets' %}">
                <i class="pe-7s-server"></i>
                <p>Liste des Datasets</p>
            </a>
        </li>
        <li class="active-pro">
            <a href="{% url 'detection_app:index' %}">
                <i class="pe-7s-rocket"></i>
                <p> Détecteur Easy-Safe</p>
            </a>
        </li>
    </ul>
{% endblock %}
{% block navbar-brand %}Tableau de bord{% endblock %}
{% block navbar-hidden %}Tableau de bord{% endblock %}

{% block content %}
              <div class="row">
                    <div class="col-md-4">
                        <div class="card">

                            <div class="header">
                                <h4 class="title text-center">Liste des modèles</h4>
                                <p class="category"></p>
                            </div>
                            <div class="content">
                            {% if models %}
                                <table class="table">
                                      <tbody>
                                          {% for m in models %}
                                              <tr>
                                                  <th scope="row">{{ m.name }}</th>
                                                  <td>
                                                      <button type="button" rel="tooltip" title="Rapport de validation" data-toggle="modal" data-target="#{{ m.pk }}"  class="btn btn-info btn-round btn-sm">
                                                        <i class="fa fa-info"></i>
                                                     </button>
                                                  </td>
                                                  <td>
                                                      <a type="button" rel="tooltip" title="Télécharger" class="btn btn-success btn-round btn-sm" href='{% url 'training_app:download' path=m.path %}'>
                                                        <i class="fa fa-download"></i>
                                                     </a>
                                                  </td>

                                              </tr>
                                          {% endfor %}
                                      </tbody>
                                </table>
                            {% endif %}

                            </div>
                        </div>
                        <div class="card">
                            <div class="content">
                                <p class="title text-center">Nombre d'applications malines</p>
                                <div class="card  card-hover-effect">
                                    <h3 class="text-center text-danger">{{ malware }}</h3>
                                </div>
                                <p class="title text-center">Nombre d'applications bégnines</p>
                                <div class="card">
                                    <h3 class="text-center text-success">{{ goodware }}</h3>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-8">
                        <div class="card ">
                            <div class="header">
                                <h4 class="title text-center">Sources d'applications</h4>
                                <p class="category"></p>
                            </div>
                            <div class="content">
                                {% include_container data.chartcontainer 400 600 %}
                            </div>
                        </div>
                    </div>
            </div>

{% endblock %}



{% block modals %}
    {% if models %}
        {% for m in models %}
            <div class="modal" id="{{ m.pk }}" tabindex="-1" role="dialog"  aria-hidden="true">
              <div class="modal-dialog modal-sm">
                <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                          <h5 class="modal-title text-center">Evaluation {{ m.name }}</h5>
                      </div>
                    <div class="modal-body">
                        <table class="table-condensed">

                          <tbody>
                              <tr>
                                <th scope="row">Positives</th>
                                <td>{{m.positives}}</td>
                              </tr>
                              <tr>
                                <th scope="row">Negatives</th>
                                <td>{{m.negatives}}</td>
                              </tr>
                              <tr>
                                <th scope="row">Auc</th>
                                <td>{{m.auc}}</td>
                              </tr>
                              <tr>
                                <th scope="row">Accuracy</th>
                                <td>{{m.accuracy}}</td>
                              </tr>
                              <tr>
                                <th scope="row">recall</th>
                                <td>{{m.recall}}</td>
                              </tr>
                              <tr>
                                <th scope="row">Precision</th>
                                <td>{{m.precision}}</td>
                              </tr>
                              <tr>
                                <th scope="row">F1</th>
                                <td>{{m.f1}}</td>
                              </tr>
                              <tr>
                                <th scope="row">TP</th>
                                <td>{{m.tp}}</td>
                              </tr>
                              <tr>
                                <th scope="row">TN</th>
                                <td>{{m.tn}}</td>
                              </tr>
                              <tr>
                                <th scope="row">FP</th>
                                <td>{{m.fp}}</td>
                              </tr>
                              <tr>
                                <th scope="row">FN</th>
                                <td>{{m.fn}}</td>
                              </tr>
                              <tr>
                                <th scope="row">TPR</th>
                                <td>{{m.tpr}}</td>
                              </tr>
                              <tr>
                                <th scope="row">FPR</th>
                                <td>{{m.fpr}}</td>
                              </tr>
                          </tbody>
                        </table>
                    </div>
              </div>
            </div>
            </div>
        {% endfor %}
    {% endif %}
{% endblock %}
